<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title th:text="${menu != null and menu.name != null} ? 'Menu Details | ' + ${menu.name} : 'Menu Details'">Menu Details</title>

    <link rel="stylesheet" th:href="@{/css/app.css}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <style>
        .top-nav{
            position:sticky; top:0; z-index:1000;
            background: linear-gradient(90deg, rgba(108,92,231,.95), rgba(0,184,148,.95));
            box-shadow:0 10px 30px rgba(17, 38, 146, .18);
            color:#fff;
        }
        .top-nav .nav-wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;}
        .top-nav .brand{font-weight:800;letter-spacing:.3px;}
        .top-nav .nav-links{display:flex;gap:12px;flex-wrap:wrap;}
        .top-nav .nav-links a{
            color:#fff;text-decoration:none;padding:8px 12px;border-radius:10px;
            background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
            border: 1px solid rgba(255,255,255,.18);
        }
        .top-nav .nav-links a.active{box-shadow: inset 0 0 0 999px rgba(255,255,255,.08);}

        .page-wrap{max-width:1100px;margin:0 auto;padding:24px 16px;}
        .role-chip{display:inline-flex;gap:8px;align-items:center;background:#eef3ff;padding:6px 12px;border-radius:999px;color:#1a4fd6;font-weight:700;}
        .title-gradient{background:linear-gradient(90deg,#6c5ce7,#00b894);-webkit-background-clip:text;background-clip:text;color:transparent;}

        .glass-card{background:#fff;border-radius:14px;box-shadow:0 10px 24px rgba(0,0,0,.08);padding:16px;}
        .meta-block{display:flex;flex-wrap:wrap;gap:14px 18px;align-items:center;margin-bottom:14px;}
        .status-pill{display:inline-block;padding:4px 10px;border-radius:999px;font-weight:700;font-size:.85rem}
        .status-confirmed{background:#e8f7ee;color:#0d6b34;border:1px solid #bfe7cf}
        .status-draft{background:#f3f3f3;color:#555;border:1px solid #e0e0e0}
        .status-archived{background:#fde7ea;color:#a2273a;border:1px solid #f7b9c3}

        footer{background: linear-gradient(90deg, #6c5ce7, #00b894); color:#fff; padding:12px 20px;}
    </style>
</head>
<body>

<nav class="top-nav">
    <div class="nav-wrap">
        <div class="brand">Catering System</div>
        <div class="nav-links">
            <a th:href="@{/}" th:classappend="${activePage}=='home' ? ' active' : ''">Home</a>
            <a th:href="@{/menus}" th:classappend="${activePage}=='menu' ? ' active' : ''">Menu Management</a>
            <a th:href="@{/schedule-list}" th:classappend="${activePage}=='schedules' ? ' active' : ''">Schedules</a>
            <a th:href="@{/about}" th:classappend="${activePage}=='about' ? ' active' : ''">About</a>
        </div>
    </div>
</nav>

<div class="page-wrap" th:with="
      statusClass=
        ${menu != null and menu.status != null} ?
          (${#strings.equalsIgnoreCase(menu.status,'confirmed')} ? 'status-confirmed' :
            (${#strings.equalsIgnoreCase(menu.status,'draft')} ? 'status-draft' : 'status-archived'))
          : 'status-draft'">

    <header class="text-center mb-3">
        <div class="role-chip">üë®‚Äçüç≥ Head Chef</div>
        <h1 class="display-6 fw-bold mt-2 title-gradient" th:text="${menu != null and menu.name != null} ? ${menu.name} : 'Menu'">Menu</h1>
    </header>

    <section class="glass-card p-3">
        <div class="meta-block">
            <div>
                <span class="fw-semibold me-1">Status:</span>
                <span class="status-pill" th:classappend="${' ' + statusClass}" th:text="${menu != null ? menu.status : 'draft'}">draft</span>
            </div>
            <div>
                <span class="fw-semibold me-1">Event ID:</span>
                <span th:text="${menu != null ? menu.eventId : 0}">0</span>
            </div>
            <div>
                <span class="fw-semibold me-1">Guest Count:</span>
                <span th:text="${guestCount}">0</span>
            </div>
        </div>

        <h5 class="mb-2">Items</h5>
        <div th:if="${menu == null or #lists.isEmpty(menu.items)}" class="text-muted mb-3">No items added.</div>

        <ul class="list-group mb-3" th:if="${menu != null and !#lists.isEmpty(menu.items)}">
            <li class="list-group-item" th:each="item : ${menu.items}" th:text="${item}">Item Name</li>
        </ul>

        <div class="d-flex gap-2 flex-wrap">
            <a th:href="@{|/menus/${menu.id}/edit|}" class="btn btn-warning">Edit Menu</a>
            <a th:href="@{/menus}" class="btn btn-secondary">Back to Menus</a>
            <form th:action="@{|/menus/${menu.id}/delete|}" method="post" class="d-inline"
                  onsubmit="return confirm('Delete this menu?')">
                <button type="submit" class="btn btn-danger">Delete</button>
            </form>
        </div>
    </section>
</div>

<footer class="text-center mt-4">
    <small>Catering System ¬© 2025. All rights reserved.</small>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
