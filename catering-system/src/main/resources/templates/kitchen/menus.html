<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title th:text="${pageTitle} ?: 'Menu Management'">Menu Management</title>

    <link rel="stylesheet" th:href="@{/css/app.css}"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>

    <style>
        .page-wrap{max-width:1100px;margin:0 auto;padding:24px 16px;}
        .top-nav{
            position:sticky; top:0; z-index:1000;
            background: linear-gradient(90deg, rgba(108,92,231,.95), rgba(0,184,148,.95));
            box-shadow:0 10px 30px rgba(17, 38, 146, .18);
            color:#fff;
        }
        .top-nav .nav-wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;}
        .top-nav .brand{font-weight:800;letter-spacing:.3px;}
        .top-nav .nav-links{display:flex;gap:12px;flex-wrap:wrap;}
        .top-nav .nav-links a{
            color:#fff;text-decoration:none;padding:8px 12px;border-radius:10px;
            background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.08));
            border: 1px solid rgba(255,255,255,.18);
        }
        .top-nav .nav-links a.active{box-shadow: inset 0 0 0 999px rgba(255,255,255,.08);}

        .glass-card{background:#fff;border-radius:14px;box-shadow:0 10px 24px rgba(0,0,0,.08);padding:16px;}
        .role-chip{display:inline-flex;gap:8px;align-items:center;background:#eef3ff;padding:6px 12px;border-radius:999px;color:#1a4fd6;font-weight:700;}
        .title-gradient{background:linear-gradient(90deg,#6c5ce7,#00b894);-webkit-background-clip:text;background-clip:text;color:transparent;}

        table.table td, table.table th{vertical-align:middle;}
        footer{background: linear-gradient(90deg, #6c5ce7, #00b894); color:#fff; padding:12px 20px;}
    </style>
</head>
<body class="menu-page">

<nav class="top-nav">
    <div class="nav-wrap">
        <div class="brand">Catering System</div>
        <div class="nav-links">
            <a th:href="@{/kitchen/home}" th:classappend="${activePage}=='home' ? ' active' : ''">Home</a>
        </div>
    </div>
</nav>

<div class="page-wrap">
    <header class="mb-3 text-center">
        <div class="role-chip">üë®‚Äçüç≥ Head Chef</div>
        <h1 class="display-6 fw-bold mt-2 title-gradient" th:text="${pageTitle} ?: 'Menu Management'">Menu Management</h1>
        <div class="mt-3">
            <a th:href="@{/kitchen/schedule-form}" class="btn btn-success me-2">
                <i class="fas fa-plus me-1"></i>Add Schedule
            </a>
            <a th:href="@{/kitchen/schedule-list}" class="btn btn-outline-primary">
                <i class="fas fa-list me-1"></i>View Schedules
            </a>
        </div>
    </header>

    <!-- New Menu Form -->
    <section class="glass-card mb-4">
        <form th:action="@{/kitchen/menus}" method="post" class="row g-3">
            <div class="col-12 col-md-5">
                <label for="name" class="form-label">Menu Name</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="e.g., Wedding Dinner" required/>
            </div>
            <div class="col-12 col-md-3">
                <label for="status" class="form-label">Status</label>
                <select id="status" name="status" class="form-select">
                    <option value="draft">Draft</option>
                    <option value="confirmed">Confirmed</option>
                    <option value="planned">Planned</option>
                    <option value="in_progress">In Progress</option>
                </select>
            </div>
            <div class="col-12 col-md-2">
                <label for="eventId" class="form-label">Event ID (optional)</label>
                <input type="number" id="eventId" name="eventId" class="form-control" min="0" placeholder="0"/>
            </div>
            <div class="col-12 col-md-2 d-flex align-items-end">
                <button type="submit" class="btn btn-primary w-100">Add Menu</button>
            </div>
        </form>
    </section>

    <!-- Menu List -->
    <section class="glass-card">
        <!-- Error/Info Messages -->
        <div th:if="${errorMessage}" class="alert alert-danger" th:text="${errorMessage}">Error message</div>
        <div th:if="${infoMessage}" class="alert alert-info" th:text="${infoMessage}">Info message</div>
        
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h2 class="h5 m-0">Available Menus</h2>
            <a th:href="@{/kitchen/menus}" class="btn btn-outline-secondary btn-sm">Refresh</a>
        </div>

        <div class="table-responsive">
            <table class="table table-striped table-hover table-bordered mb-0">
                <thead class="table-dark">
                <tr>
                    <th style="width:80px;">ID</th>
                    <th>Name</th>
                    <th style="width:160px;">Status</th>
                    <th style="width:220px;">Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="menu : ${menus}">
                    <td th:text="${menu.id}">0</td>
                    <td>
                        <a th:href="@{|/kitchen/menus/${menu.id}|}" th:text="${menu.name}">Menu Name</a>
                    </td>
                    <td th:text="${menu.status}">draft</td>
                    <td class="text-nowrap">
                        <a th:href="@{|/kitchen/menus/${menu.id}/edit|}" class="btn btn-outline-warning btn-sm me-2">Edit</a>
                        <form th:action="@{|/kitchen/menus/${menu.id}/delete|}" method="post" class="d-inline"
                              onsubmit="return confirm('Delete this menu?')">
                            <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                        </form>
                    </td>
                </tr>
                <tr th:if="${menus == null or #lists.isEmpty(menus)}">
                    <td colspan="4" class="text-center text-muted py-4">No menus found.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<footer class="text-center mt-4">
    <small>Catering System ¬© 2025. All rights reserved.</small>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
